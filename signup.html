<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
    <link rel="stylesheet" href="style_signup.css">
</head>

<body>
    <div class="signup-container">
        <div class="signup-form">
            <h2>Sign Up</h2>
            <form action="submit.php" method="POST" enctype="multipart/form-data" onsubmit="return validateForm()">
                <!-- Business Information -->
                <fieldset>
                    <legend>Business Information</legend>
                    <label for="provider-id">Provider ID:</label>
                    <input type="text" id="provider-id" name="provider_id" required>

                    <label for="business-name">Business Name:</label>
                    <input type="text" id="business-name" name="business_name" required>

                    <label for="business-address" id="ba">Business Address:</label>
                    <input type="text" id="street-number" name="street_number" placeholder="Street Number" required>
                    <input type="text" id="street-name" name="street_name" placeholder="Street Name" required>
                    <input type="text" id="city" name="city" class="small-input" placeholder="City" required>
                    <input type="text" id="state" name="state" class="small-input" placeholder="State" required>
                    <input type="text" id="country" name="country" class="small-input" placeholder="Country" required>
                    <input type="text" id="zip-code" name="zip_code" class="small-input" placeholder="ZIP Code" required>

                    <label for="business-logo">Business Logo (up to 2MB):</label>
                    <input type="file" id="business-logo" name="business_logo" accept=".jpg, .jpeg, .png" required>
                    <div id="logo-preview"></div>

                    <label for="business-tagline">Business Tagline:</label>
                    <textarea id="business-tagline" name="business_tagline"></textarea>

                    <label for="business-description">Business Description:</label>
                    <textarea id="business-description" name="business_description"></textarea>

                    <label for="business-images">Business Related Images (up to 5 images ( max limit-2MB each) ):</label>
                    <input type="file" id="business-images" name="business_images[]" multiple accept=".jpg, .jpeg, .png"
                        onchange="handleFiles(event)">
                    <div id="images-preview"></div>
                </fieldset>

                <!-- Provider Information -->
                <fieldset>
                    <legend>Point Of Contact</legend>
                    <label for="provider-username">Username:</label>
                    <input type="text" id="provider-username" name="provider_username" required>

                    <label for="provider-name">Name:</label>
                    <input type="text" id="provider-name" name="provider_name" required>

                    <label for="provider-email">Email:</label>
                    <input type="email" id="provider-email" name="provider_email" class="small-input" required>

                    <label for="provider-mobile">Mobile:</label>
                    <input type="tel" id="provider-mobile" name="provider_mobile" class="small-input" pattern="[0-9]{10}"
                        title="Please enter a 10-digit number" required>

                    <label for="provider-password">Password:</label>
                    <input type="password" id="provider-password" name="provider_password" class="small-input" required>

                    <label for="website-link">Website Link:</label>
                    <input type="url" id="website-link" name="website_link">
                </fieldset>

                <button type="submit" id="upload-button">Sign Up</button>
            </form>
        </div>
    </div>
    <script>
        function validateForm() {
            // Validate Business Logo Size
            const logoInput = document.getElementById('business-logo');
            if (logoInput.files.length > 0 && logoInput.files[0].size > 2097152) { // 2MB
                alert('Business logo must be less than 2MB.');
                return false;
            }

            // Validate Business Images Size and Count
            const imagesInput = document.getElementById('business-images');
            if (imagesInput.files.length > 5) {
                alert('You can upload a maximum of 5 business images.');
                return false;
            }
            for (const file of imagesInput.files) {
                if (file.size > 2097152) { // 2MB
                    alert('Each business image must be less than 2MB.');
                    return false;
                }
            }

            return true;
        }

        function handleFiles(event) {
            const files = event.target.files;
            const preview = document.getElementById('images-preview');
            preview.innerHTML = '';

            if (files.length > 5) {
                alert('You can upload a maximum of 5 business images.');
                event.target.value = '';
                return;
            }

            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                if (file.size > 2097152) {
                    alert('Each business image must be less than 2MB.');
                    event.target.value = '';
                    return;
                }
                const reader = new FileReader();
                reader.onload = function (e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.style.maxWidth = '100px';
                    img.style.maxHeight = '100px';
                    img.style.marginRight = '10px';
                    preview.appendChild(img);
                };
                reader.readAsDataURL(file);
            }
        }
    </script>
</body>

</html>
